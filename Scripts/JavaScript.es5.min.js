"use strict";function Team(n,t){this.name=n;this.writeName=t;this.bonusRemainingTime=80;this.pick=1}function PhaseType(n,t){this.type=n;this.time=t}function Phase(n,t){this.type=n;this.team=t}function CaptainsPick(n,t){function e(n,t){var i="#hero-outline-"+n.name+"-"+n.pick+++" img";$(i).attr("src",$(t).attr("src"))}var i=this,r,u,f;this.legion=n;this.hellbourne=t;this.currentTime=0;this.phaseIndex=-1;r=n;u=t;Math.random()<.5&&(f=[r,u],u=f[0],r=f[1]);this.phases=[new Phase(PHASE_TYPE.BAN,r),new Phase(PHASE_TYPE.BAN,u),new Phase(PHASE_TYPE.BAN,r),new Phase(PHASE_TYPE.BAN,u),new Phase(PHASE_TYPE.BAN,r),new Phase(PHASE_TYPE.BAN,u),new Phase(PHASE_TYPE.PICK,r),new Phase(PHASE_TYPE.PICK,u),new Phase(PHASE_TYPE.PICK,u),new Phase(PHASE_TYPE.PICK,r),new Phase(PHASE_TYPE.PICK,r),new Phase(PHASE_TYPE.BAN,u),new Phase(PHASE_TYPE.BAN,r),new Phase(PHASE_TYPE.BAN,u),new Phase(PHASE_TYPE.BAN,r),new Phase(PHASE_TYPE.BAN,u),new Phase(PHASE_TYPE.BAN,r),new Phase(PHASE_TYPE.PICK,u),new Phase(PHASE_TYPE.PICK,u),new Phase(PHASE_TYPE.PICK,r),new Phase(PHASE_TYPE.PICK,r),new Phase(PHASE_TYPE.PICK,u)];this.nextPhase=function(){var n,t;i.phaseIndex++;i.isEnd()||(n=this.currentPhase(),this.currentTime=n.type.time,t="<span class='"+n.team.name+"'>"+n.team.writeName+"<\/span>",t+=" is now ",t+=n.type==PHASE_TYPE.BAN?"<span class='red'>banning<\/span>":"<span class='green'>picking<\/span>",i.writeAlert(t),i.update())};this.isEnd=function(){return!(i.phaseIndex>=0&&i.phaseIndex<i.phases.length)||i.currentTime<=0&&i.currentPhase().team.bonusRemainingTime<=0};this.currentPhase=function(){return i.phases[i.phaseIndex]};this.update=function(){i.currentTime<=0&&i.currentPhase().team.bonusRemainingTime<=0&&i.writeAlert(i.currentPhase().team.writeName+" ran out of time!");$("#currentTime").text(Math.floor(this.currentTime/60)+":"+this.currentTime%60);$("#legionTime").text(this.legion.bonusRemainingTime);$("#hellbourneTime").text(this.hellbourne.bonusRemainingTime)};this.tick=function(){i.isEnd()||(i.currentTime>0?i.currentTime--:i.currentPhase().team.bonusRemainingTime>0?i.currentPhase().team.bonusRemainingTime--:i.stop(),i.update())};this.init=function(){this.nextPhase()};this.start=function(){i.intervalHandle||(this.intervalHandle=setInterval(this.tick,1e3))};this.stop=function(){i.intervalHandle&&clearInterval(i.intervalHandle)};this.heroClicked=function(n){if(!i.isEnd()&&!$(n).hasClass("banned")&&!$(n).hasClass("picked")&&!$(n).hasClass("not-selectable")){var t=i.currentPhase().team.name,r=i.currentPhase().team.writeName;i.currentPhase().type==PHASE_TYPE.BAN?($(n).addClass("banned"),i.writeMessage("<span class='"+t+"'>"+r+"<\/span> <b class='red'>banned<\/b> "+$(n).attr("alt")+"<br />"),$(n).wrap("<span class='banned-wrapper'><\/span>")):($(n).addClass("picked"),e(i.currentPhase().team,n),i.writeMessage("<span class='"+t+"'>"+r+"<\/span> <b class='green'>picked<\/b> "+$(n).attr("alt")+"<br />"));i.nextPhase();i.isEnd()&&i.writeAlert("Picking phase is done!")}};this.writeMessage=function(n){var t=$("#chat");t.append(n);t.scrollTop(t.prop("scrollHeight"))};this.writeAlert=function(n){$("#alert").html(n)}}function reload(){location.reload()}var PHASE_TYPE={BAN:{time:25},PICK:{time:35}},legion=new Team("legion","Legion"),hellbourne=new Team("hellbourne","Hellbourne"),captainsPick=new CaptainsPick(legion,hellbourne);$(document).ready(function(){$(".heroes img:not(.not-selectable)").click(function(n){captainsPick.heroClicked(n.currentTarget)});$(".heroes img:not(.not-selectable)").each(function(n,t){$(t).attr("data-toggle","tooltip");$(t).attr("title",$(t).attr("alt"))});$("#start").click(function(){captainsPick.init();captainsPick.start();$("#start").remove()});$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()})});